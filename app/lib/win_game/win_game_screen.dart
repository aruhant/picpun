import 'package:auto_size_text_plus/auto_size_text_plus.dart';
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:picpun/generated/locale_keys.g.dart';
import 'package:picpun/level_selection/levels.dart';
import 'package:picpun/player_progress/player_progress.dart';
import 'package:picpun/util/ads.dart';
import 'package:provider/provider.dart';
import 'package:easy_localization/easy_localization.dart';
import '../game_internals/score.dart';
import '../style/palette.dart';
import '../style/responsive_screen.dart';

class WinGameScreen extends StatelessWidget {
  final Score score;
  final GameLevel level;

  const WinGameScreen({super.key, required this.level, required this.score});

  @override
  Widget build(BuildContext context) {
    final palette = context.watch<Palette>();
    const gap = SizedBox(height: 14);

    return Scaffold(
        backgroundColor: palette.backgroundPlaySession,
        body: ResponsiveScreen(
            squarishMainArea: Column(
                mainAxisAlignment: MainAxisAlignment.center,
                children: <Widget>[
                  gap,
                  Center(
                      child: AutoSizeText(winMessage(),
                          maxLines: 1,
                          textAlign: TextAlign.center,
                          style: TextStyle(fontSize: 50))),
                  gap,
                  Container(
                      clipBehavior: Clip.antiAlias,
                      decoration: BoxDecoration(
                        boxShadow: [
                          BoxShadow(
                              color: Colors.black.withOpacity(0.5),
                              blurRadius: 10,
                              offset: const Offset(5, 5))
                        ],
                        borderRadius: BorderRadius.circular(18),
                      ),
                      child: Image.asset(level.image,
                          width: 200, height: 200, fit: BoxFit.contain)),
                  gap,
                  Center(
                      child: AutoSizeText(level.answer,
                          maxLines: 2, style: TextStyle(fontSize: 30))),
                  gap,
                  Center(
                      child: Text(LocaleKeys.level.tr() + ': ${score.level}',
                          // 'Time: ${score.formattedTime}',
                          style: const TextStyle(
                              fontFamily: 'Baloo 2', fontSize: 20)))
                ]),
            rectangularMenuArea: Column(
              children: [
                buildAdbutton(
                    (credits) => addCreditsAndGoToNextLevel(context, credits),
                    adShownCredits: 25),
                gap,
                TextButton(
                    onPressed: () => addCreditsAndGoToNextLevel(context, 10),
                    child: Text('${LocaleKeys.next_level.tr()} +10 ЁЯТО')),
                gap,
              ],
            )));
  }

  void addCreditsAndGoToNextLevel(BuildContext context, int credits) {
    PlayerProgress playerProgress = context.read<PlayerProgress>();
    playerProgress.addCredits(credits);
    GoRouter.of(context).go('/play/session/${score.level}');
  }

  String winMessage() {
    return LocaleKeys.win_message.tr();
    List<String> messages = [
      "рдХреНрдпрд╛ рдмрд╛рдд рд╣реИ! рдЬреАрдд рдЖрдкрдХреА рд╣реА рддреЛ рд╣реИ!",
      "рдРрд╕рд╛ рдЦреЗрд▓, рдРрд╕рд╛ рддрдбрд╝рдХрд╛!",
      "рдЖрдк рд╣реИрдВ рдЕрд╕рд▓реА рдЬрд╛рджреВрдЧрд░!",
      "рдЖрдк рддреЛ рд╕рдЪреНрдЪреЗ рд╣реАрд░реЛ рдирд┐рдХрд▓реЗ!",
      "рдХреНрдпрд╛ рдмрд╛рдд рд╣реИ!",
      "рдЖрд▓реМрдХрд┐рдХ рд╢рдХреНрддрд┐рдпрд╛рдБ рд╣реИрдВ рдЖрдкрдХреЗ рдЕрдВрджрд░!",
      "рдЗрд╕ рдЬреАрдд рдХреЗ рдмрд╛рдж рддреЛ рдЖрдкрдХрд╛ рдирд╛рдо рдЧреВрдВрдЬреЗрдЧрд╛!",
      "рд╡реЛ рдХрд╣рддреЗ рд╣реИрдВ рдирд╛, рдмрд╣реЗрддрд░реАрди рдЦреЗрд▓тАФрдмрд┐рд▓рдХреБрд▓ рд╡реИрд╕рд╛!",
      "рдРрд╕рд╛ рдЦреЗрд▓, рдРрд╕рд╛ рдЬрд▓рд╡рд╛!",
      "рдЖрдкрдХрд╛ рдЬрд╛рджреВ рдЪрд▓ рдкрдбрд╝рд╛ рд╣реИ!",
      "рдЖрдк рдЬреЛ рдЦреЗрд▓рддреЗ рд╣реЛ, рд╡рд╣реА рдЬреАрддрддреЗ рд╣реЛ!",
      "рдЖрдк рд╣реЛ рд╣рдорд╛рд░реА рдЧреЗрдо рдХреЗ рдЪреИрдВрдкрд┐рдпрди!",
      "рдЖрдкрдХреА рдЬреАрдд, рдЖрдкрдХреА рдкрд╣рдЪрд╛рди!",
      "рдПрдХ рдмрд╛рд░ рдлрд┐рд░ рд╕реЗ! рдЖрдк рд╣реА рдЬреАрддрдиреЗ рд╡рд╛рд▓реЗ рд╣реИрдВ!",
      "рдЖрдк рд╣реИрдВ рдЗрд╕ рдЧреЗрдо рдХреЗ рдЕрд╕рд▓реА рдмрд╛рджрд╢рд╛рд╣!",
      "рдЕрд░реЗ рд╡рд╛рд╣, рдХреНрдпрд╛ рд╢рд╛рдирджрд╛рд░ рдЬреАрдд рд╣реИ!",
      "рдЖрдк рд╣реИрдВ рдЧреЗрдо рдХреЗ рд╕рдмрд╕реЗ рдмрдбрд╝реЗ рдЦрд┐рд▓рд╛рдбрд╝реА!",
      "рдХреНрдпрд╛ рдЬреАрдд рд╣реИ! рдЖрдк рддреЛ рдЕрд╕рд▓реА рд╡рд┐рдЬреЗрддрд╛ рд╣реИрдВ!",
      "рдЬреАрдд рдХреЗ рдмрд╛рдж рдЖрдк рддреЛ рдЦреБрдж рдПрдХ рдХрд╣рд╛рдиреА рдмрди рдЧрдП рд╣реИрдВ!",
      "рдЖрдкрдХреЗ рдЦреЗрд▓ рдХрд╛ рдХреЛрдИ рдореБрдХрд╛рдмрд▓рд╛ рдирд╣реАрдВ!",
      "рдмрд┐рд▓рдХреБрд▓ рд▓рд╛рдЬрд╡рд╛рдм, рдРрд╕рд╛ рдЦреЗрд▓ рдХрд╣реАрдВ рдирд╣реАрдВ рджреЗрдЦрд╛!",
      "рдЖрдкрдХреА рдЬреАрдд рдХреЛ рджреЗрдЦрдХрд░ рддреЛ рд╕рднреА рд╣реИрд░рд╛рди рд╣реИрдВ!",
      "рдЖрдкрдХреА рдЬреАрдд рдореЗрдВ рдХреБрдЫ рдЦрд╛рд╕ рд╣реИ, рдкреВрд░реА рджреБрдирд┐рдпрд╛ рджреЗрдЦреЗрдЧреА!",
      "рдЖрдкрдиреЗ рддреЛ рдЬреИрд╕реЗ рдЬрд╛рджреВ рдХрд░ рджрд┐рдпрд╛ рдЗрд╕ рдЦреЗрд▓ рдореЗрдВ!",
      "рдЖрдкрдХреЗ рдЬреИрд╕рд╛ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреМрди?",
      "рдпрд╣ рдЬреАрдд рд╣рд░ рдХрд┐рд╕реА рдХреЗ рдмрд╕ рдХреА рдмрд╛рдд рдирд╣реАрдВ!",
      "рдЖрдкрдХреА рдЬреАрдд рдЕрдм рддрдХ рдХреА рд╕рдмрд╕реЗ рдмреЗрд╣рддрд░реАрди рд╣реИ!",
      "рджреБрдирд┐рдпрд╛ рдХреА рд╕рдмрд╕реЗ рдмреЗрд╣рддрд░реАрди рдЬреАрдд, рдЖрдкрдХреА!",
      "рдЖрдкрдХреА рдЬреАрдд рдиреЗ рддреЛ рд╕рдмрдХреЛ рдЪреМрдВрдХрд╛ рджрд┐рдпрд╛!",
      "рдЖрдкрдХреА рдЬреАрдд рдПрдХ рдорд┐рд╕рд╛рд▓ рд╣реИ!",
      "рд╢рд╛рдирджрд╛рд░! рдЕрдм рдЖрдкрдХреА рдЬреАрдд рдХрд╛ рдЬрд╢реНрди рдордирд╛рдЗрдП!",
      "рдЖрдкрдХреА рдЬреАрдд рдиреЗ рддреЛ рд╕рднреА рдХреЗ рд╣реЛрд╢ рдЙрдбрд╝рд╛ рджрд┐рдП!",
      "рдЬрд┐рддрдиреА рддреЗрдЬрд╝реА рд╕реЗ рдЖрдкрдиреЗ рд╣рд▓ рдХрд┐рдпрд╛, рдЙрддрдиреА рд╣реА рдЪрддреБрд░рд╛рдИ рд╕реЗ!",
      "рд╣рд░ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╣рд▓ рдерд╛ рдЖрдкрдХреЗ рджрд┐рдорд╛рдЧ рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ!",
      "рд╢рд╛рдирджрд╛рд░! рдРрд╕рд╛ рд▓рдЧрд╛ рдЬреИрд╕реЗ рдЖрдкрдХреЛ рдпреЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкрддрд╛ рдерд╛!",
      "рдЬрдм рджрд┐рдорд╛рдЧреА рдЦреЗрд▓ рдХреА рдмрд╛рдд рд╣реЛ, рддреЛ рдЖрдк рд╕рдмрд╕реЗ рдЖрдЧреЗ рд╣реЛ!",
      "рдЖрдкрдХреЗ рджрд┐рдорд╛рдЧ рдореЗрдВ рдРрд╕рд╛ рдХреБрдЫ рд╣реИ, рдЬреЛ рд╣рд░ рдкрд╣реЗрд▓реА рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛ рджреЗрддрд╛ рд╣реИ!",
      "рдХреНрдпрд╛ рддреЗрдЬрд╝реА рд╕реЗ рд╣рд▓ рдХрд┐рдпрд╛! рдРрд╕реЗ рддреЛ рдХреЛрдИ рднреА рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛!",
      "рдЖрдкрдиреЗ рддреЛ рдЬреИрд╕реЗ рдЧреЗрдо рдХреЛ рдЕрдкрдиреА рдКрдБрдЧрд▓рд┐рдпреЛрдВ рдкрд░ рдШреБрдорд╛рдпрд╛!",
      "рд╣рд░ рдЪреБрдиреМрддреА рдХреЛ рдЖрдкрдиреЗ рдЪреБрдЯрдХрд┐рдпреЛрдВ рдореЗрдВ рд╣рд▓ рдХрд░ рджрд┐рдпрд╛!",
      "рдЖрдкрдиреЗ рддреЛ рдЗрд╕ рдкрд╣реЗрд▓реА рдХреЛ рдРрд╕реЗ рд╕реБрд▓рдЭрд╛рдпрд╛ рдЬреИрд╕реЗ рдХреБрдЫ рднреА рдирд╣реАрдВ рдерд╛!",
      "рд╕рд╡рд╛рд▓ рдЪрд╛рд╣реЗ рдЬреИрд╕рд╛ рднреА рд╣реЛ, рдЖрдкрдХреЗ рдкрд╛рд╕ рдЬрд╡рд╛рдм рд╣рдореЗрд╢рд╛ рддреИрдпрд╛рд░ рд╣реЛрддрд╛ рд╣реИ!",
      "рдЖрдкрдХреА рдмреБрджреНрдзрд┐ рдХрд╛ рдХреЛрдИ рдореБрдХрд╛рдмрд▓рд╛ рдирд╣реАрдВ!",
      "рдЖрдкрдХреА рд╕реЛрдЪ рдХрд╛ рд╕реНрддрд░ рдЗрддрдирд╛ рдКрдБрдЪрд╛ рд╣реИ, рдмрд╛рдХреА рд╕рдм рддреЛ рдмрд╕ рджреЗрдЦ рд░рд╣реЗ рд╣реИрдВ!",
      "рд╢рд╛рдирджрд╛рд░! рдЖрдк рддреЛ рджрд┐рдорд╛рдЧреА рдЦреЗрд▓ рдХреЗ рдЕрд╕рд▓реА рдорд╛рд╕реНрдЯрд░ рд╣реЛ!",
      "рдЖрдкрдиреЗ рддреЛ рдЗрд╕реЗ рдЬреИрд╕реЗ рдЕрдкрдиреА рд╕рдордЭ рд╕реЗ рд╣рд▓ рдХрд░ рд▓рд┐рдпрд╛, рдХреЛрдИ рд░реЛрдХ рдирд╣реАрдВ рд╕рдХрддрд╛!",
      "рдХреНрдпрд╛ рд╢рд╛рдирджрд╛рд░ рд╕реЛрдЪ рд╣реИ!",
      "рд╕рднреА рджрд┐рдорд╛рдЧреА рдЦреЗрд▓реЛрдВ рдореЗрдВ рдЕрдм рдЖрдкрдХрд╛ рдирд╛рдо рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рдЖрдПрдЧрд╛!",
      "рдЖрдкрдХреЗ рджрд┐рдорд╛рдЧ рдореЗрдВ рд╣рд░ рд╕рд╡рд╛рд▓ рдХрд╛ рд╣рд▓ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдерд╛!",
      "рдЖрдкрдХреА рд╕рдЯреАрдХрддрд╛ рдФрд░ рддреЗрдЬрд╝реА рдиреЗ рд╕рдмрдХреЛ рдЪреМрдВрдХрд╛ рджрд┐рдпрд╛!",
      "рдЖрдкрдХреА рд╕реЛрдЪ рдФрд░ рд╕рдордЭ рдХрд╛ рдХреЛрдИ рдореБрдХрд╛рдмрд▓рд╛ рдирд╣реАрдВ!",
      "рдЗрддрдиреА рдореЗрд╣рдирдд рдФрд░ рд╕рдордЭ рд╕реЗ рд╣рд▓ рдХрд┐рдпрд╛, рдмреЗрд╣рддрд░реАрди!",
      "рдЖрдкрдиреЗ рдкрд╣реЗрд▓реА рдХреЛ рд╕реБрд▓рдЭрд╛ рджрд┐рдпрд╛, рдРрд╕рд╛ рд▓рдЧ рд░рд╣рд╛ рд╣реИ рдЬреИрд╕реЗ рдЗрд╕реЗ рдкрд╣рд▓реЗ рд╕реЗ рдЬрд╛рдирддреЗ рд╣реЛ!",
      "рдЗрд╕ рдЦреЗрд▓ рдореЗрдВ рдЬрд┐рддрдирд╛ рддреЗрдЬрд╝ рдФрд░ рд╕реНрдорд╛рд░реНрдЯ рдЖрдк рд╣реЛ, рдЙрддрдирд╛ рдХреЛрдИ рдирд╣реАрдВ!",
      "рдЖрдкрдХреЗ рджрд┐рдорд╛рдЧ рдореЗрдВ рдПрдХ рд╡рд┐рдЬреЗрддрд╛ рдХреА рдЭрд▓рдХ рд╣реИ, рд╣рд░ рдЪреБрдиреМрддреА рдХреЛ рдкрд╛рд░ рдХрд░ рд▓реЗрддреЗ рд╣реЛ!",
      "рджрд┐рдорд╛рдЧреА рдЦреЗрд▓ рд╣реЛ рдФрд░ рдЙрд╕рдореЗрдВ рдЖрдк рди рдЬреАрддреЗрдВ, рдРрд╕рд╛ рд╣реЛ рд╣реА рдирд╣реАрдВ рд╕рдХрддрд╛!",
      "рдЖрдкрдиреЗ рдРрд╕рд╛ рдЦреЗрд▓ рджрд┐рдЦрд╛рдпрд╛, рдЬреИрд╕реЗ рдкрд╣реЗрд▓реА рдЦреБрдж рдЖрдкрдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдХреА рдЧрдИ рд╣реЛ!",
      "рдХрднреА рд╣рд╛рд░ рдорд╛рдирдиреЗ рдХрд╛ рдирд╛рдо рдирд╣реАрдВ рд▓рд┐рдпрд╛! рдпрд╣реА рдЕрд╕рд▓реА рдЬреАрдд рд╣реИ!",
      "рддреАрд╡реНрд░ рд╕реЛрдЪ!",
      "рдпрд╣ рдЬреАрдд рд╕рд╛рдмрд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рджрд┐рдорд╛рдЧ рдХрд╛ рдХреЛрдИ рдореБрдХрд╛рдмрд▓рд╛ рдирд╣реАрдВ!",
      "рд╢рд╛рдирджрд╛рд░!",
      "рдЬреИрд╕реЗ рдЖрдкрдХреЛ рд╣рд░ рд╕рд╡рд╛рд▓ рдХрд╛ рдЬрд╡рд╛рдм рдкрд╣рд▓реЗ рд╕реЗ рдкрддрд╛ рдерд╛!",
      "рдЗрддрдиреА рд╕рдордЭрджрд╛рд░реА рд╕реЗ рдЦреЗрд▓рд╛, рдЕрдм рдпреЗ рдЦреЗрд▓ рднреА рдЖрд╕рд╛рди рд▓рдЧрддрд╛ рд╣реИ!",
      "рдпрд╣ рддреЛ рд╕рд┐рд░реНрдл рдПрдХ рдФрд░ рдЬреАрдд рдереА рдЖрдкрдХреЗ рдирд╛рдо рдХреА!",
      "рдЖрдкрдиреЗ рдпрд╣ рдЦреЗрд▓ рдЬреАрддрдиреЗ рдореЗрдВ рдЗрддрдиреА рдЪрддреБрд░рд╛рдИ рджрд┐рдЦрд╛рдИ, рдХрд┐ рд╕рдм рджрдВрдЧ рд░рд╣ рдЧрдП!",
      "рдХреНрдпрд╛ рдЧрддрд┐ рд╣реИ! рдпрд╣ рдЦреЗрд▓ рдмрд╣реБрдд рдЖрд╕рд╛рди рд▓рдЧрдиреЗ рд▓рдЧрд╛!",
      "рд╣рд░ рдЧреЗрдо рдХреЛ рдЬреАрддрдиреЗ рдХрд╛ рддрд░реАрдХрд╛ - рдмреЗрд╣рддрд░реАрди!",
      "рдмрд┐рд▓рдХреБрд▓ рддреЗрдЬрд╝ рдФрд░ рд╕рдЯреАрдХ, рдЬреИрд╕реЗ рд╕рдм рдХреБрдЫ рдЖрдкрдХреЗ рджрд┐рдорд╛рдЧ рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рддреИрдпрд╛рд░ рд╣реЛ!",
      "рдЖрдкрдиреЗ рдЬрд┐рддрдирд╛ рд╢рд╛рдирджрд╛рд░ рдЦреЗрд▓рд╛, рдЙрддрдирд╛ рдХреЛрдИ рдФрд░ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛!",
      "рдЖрдкрдХреА рдЬреАрдд рдиреЗ рд╕рд╛рдмрд┐рдд рдХрд░ рджрд┐рдпрд╛ рдХрд┐ рджрд┐рдорд╛рдЧреА рдЦреЗрд▓ рдореЗрдВ рдЖрдк рд╕рдмрд╕реЗ рдЖрдЧреЗ рд╣реЛ!",
      "рдЖрдкрдиреЗ рддреЛ рдЗрд╕реЗ рд╣рд▓ рдХрд░рдХреЗ рд╣рд░ рдЪреБрдиреМрддреА рдХреЛ рдорд╛рдд рджреЗ рджреА!"
    ];
    return messages.elementAt(DateTime.now().microsecond % messages.length);
  }
}
